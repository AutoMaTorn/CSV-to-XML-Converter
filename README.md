Проект: Конвертер CSV → XML (C, gcc, make)
==========================================

Кратко
------
Утилита читает один или несколько CSV-файлов и формирует единый XML:
- корневой тег: `<dataset>`
- для каждого входного файла — `<table index="...">`
- каждая строка — `<row>`
- каждое поле — `<col name="Header">value</col>`
Спецсимволы XML экранируются (`& < > " '`).

Структура проекта
-----------------
- `src/` — исходники (`main.c`, `file_input.c`, `csv_parser.c`, `xml_writer.c`, `utils.c`)
- `include/` — заголовки
- `build/` — объектные файлы (создаётся автоматически)
- `tools/` — вспомогательные скрипты (генератор тестовых CSV)
- `tests/` — примеры и генерируемые тестовые CSV
- `makefile` — сборка

Сборка
------
```bash
make clean && make
```
Получится исполняемый файл `./csv_to_xml`.

Запуск
------
```bash
./csv_to_xml
```
Далее:
1) Введите имена CSV-файлов через пробел (полные или относительные пути), затем Enter.
2) Введите имя выходного XML-файла (например, `out.xml`), затем Enter.

Пример:
```
Введите имена CSV-файлов через пробел:
> tests/small.csv tests/with_specials.csv
Введите имя выходного XML-файла:
> out.xml
```

Проверка результата:
```bash
cat out.xml
```

Генерация тестовых данных
-------------------------
Создать примеры и большой CSV:
```bash
make testdata
```
Будут созданы:
- `tests/small.csv`
- `tests/with_specials.csv`
- `tests/large_10000.csv` (10 000 строк)

Проверка на утечки памяти (опционально)
---------------------------------------
Если установлен valgrind:
```bash
valgrind --leak-check=full --show-leak-kinds=all ./csv_to_xml
```

Формат входного CSV
-------------------
- Разделитель: запятая (,)
- Первая строка обязательна и содержит заголовки.
- Поддержка кавычек в значениях в текущей реализации упрощена (строгое CSV с вложенными запятыми в кавычках может потребовать доработки).

Особенности реализации
----------------------
- `csv_parser.c`:
  - Инициализация счётчиков, корректный цикл `getline`, проверка согласованности числа колонок.
  - Динамическое расширение массива строк.
  - Аккуратное освобождение памяти в `free_csv`.
- `xml_writer.c`:
  - Экранирование спецсимволов XML.
  - Безопасная обработка `NULL` и ошибок выделения памяти.
- `main.c`:
  - Обработка ошибок (нет файлов/выходной путь не считан).
  - Полное освобождение ресурсов.

Ограничения и будущие улучшения
-------------------------------
- Упрощённый парсинг CSV (без полного учета кавычек/экранирования). Для строгого CSV можно заменить `split_line` на полноценный парсер.
- В теге `<table>` используется атрибут `index`. При необходимости можно добавить реальное имя файла (потребуется расширить интерфейс).

Лицензия
--------
MIT 


